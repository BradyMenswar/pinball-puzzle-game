[gd_scene load_steps=12 format=3 uid="uid://bhq64j7giowbb"]

[ext_resource type="Texture2D" uid="uid://djdj3r3cr7nuo" path="res://Assets/icon.svg" id="1_8myqi"]
[ext_resource type="PackedScene" uid="uid://cgdj2s264v52a" path="res://Scenes/Flipper.tscn" id="2_d17kv"]
[ext_resource type="PackedScene" uid="uid://df0awtrgxf7y7" path="res://Scenes/Ball.tscn" id="3_5o10c"]
[ext_resource type="PackedScene" uid="uid://dpsd7qnqbe3my" path="res://Scenes/circle_bouncer.tscn" id="4_7pdk3"]
[ext_resource type="PackedScene" uid="uid://bcmo357nxw77a" path="res://Scenes/slingshot.tscn" id="5_hv756"]
[ext_resource type="Script" path="res://Scripts/BallHandler.gd" id="5_ygwu0"]
[ext_resource type="Script" path="res://Scripts/Killbox.gd" id="7_auw3e"]
[ext_resource type="Script" path="res://Scripts/BallCount.gd" id="7_tppn5"]
[ext_resource type="PackedScene" uid="uid://cw66awwf0s0xk" path="res://Scenes/Edge.tscn" id="9_vl3sy"]

[sub_resource type="GDScript" id="GDScript_teahg"]
script/source = "extends Node2D
# Called when the node enters the scene tree for the first time.

signal change_ballcount
var balls_lost = 0
func _ready():
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	pass


func _on_killbox_body_entered(body):
	if body.has_method(\"is_ball\"):
		body.queue_free()
		balls_lost += 1
		emit_signal(\"change_ballcount\",balls_lost)

func _input(event):
	if event.is_action_pressed(\"reset_ball\"):
		#Should make a new ball scene, turn it into a node (instance) then make that node a child of main
		var scene = load(\"res://Scenes/Ball.tscn\")
		var instance = scene.instantiate()
		#Attempting to move ball
		instance.move_body(Vector2(1160, 0))
		
		
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wikol"]
size = Vector2(1278, 271)

[node name="Main" type="Node2D"]
script = SubResource("GDScript_teahg")

[node name="Flipper Left" parent="." instance=ExtResource("2_d17kv")]
position = Vector2(-820, 2000)

[node name="Flipper Right" parent="." instance=ExtResource("2_d17kv")]
position = Vector2(820, 2000)
scale = Vector2(-1, 1)
is_right = true

[node name="Sprite2D" type="Sprite2D" parent="."]
position = Vector2(1, -1327)
scale = Vector2(20, 20)
texture = ExtResource("1_8myqi")

[node name="Sprite2D2" type="Sprite2D" parent="."]
position = Vector2(33, -5391)
scale = Vector2(20, 20)
texture = ExtResource("1_8myqi")

[node name="CircleBouncer" parent="." instance=ExtResource("4_7pdk3")]
position = Vector2(-634, -1838)
scale = Vector2(0.75, 0.75)

[node name="CircleBouncer2" parent="." instance=ExtResource("4_7pdk3")]
position = Vector2(634, -1838)
scale = Vector2(0.75, 0.75)

[node name="CircleBouncer4" parent="." instance=ExtResource("4_7pdk3")]
position = Vector2(-2641, -3254)
scale = Vector2(0.75, 0.75)

[node name="CircleBouncer5" parent="." instance=ExtResource("4_7pdk3")]
position = Vector2(2641, -3254)
scale = Vector2(0.75, 0.75)

[node name="Slingshot" parent="." instance=ExtResource("5_hv756")]
position = Vector2(-1500, 600)
rotation = -0.523599
scale = Vector2(1.5, 2)

[node name="Slingshot2" parent="." instance=ExtResource("5_hv756")]
position = Vector2(1500, 600)
rotation = 0.523599
scale = Vector2(-1.5, 2)

[node name="BallHandler" type="Node2D" parent="."]
script = ExtResource("5_ygwu0")

[node name="Killbox" type="Area2D" parent="BallHandler"]
script = ExtResource("7_auw3e")

[node name="ColorRect" type="ColorRect" parent="BallHandler/Killbox"]
offset_left = -592.0
offset_top = 2572.0
offset_right = 673.0
offset_bottom = 2827.0
color = Color(0.737492, 0.327653, 0.296651, 1)

[node name="CollisionShape2D" type="CollisionShape2D" parent="BallHandler/Killbox"]
position = Vector2(41, 2693)
shape = SubResource("RectangleShape2D_wikol")

[node name="Ballcount" type="Label" parent="BallHandler/Killbox"]
offset_left = -5593.0
offset_top = -3803.0
offset_right = -2754.0
offset_bottom = -3121.0
theme_override_font_sizes/font_size = 500
text = "Balls Lost: 0
"
script = ExtResource("7_tppn5")

[node name="Ball" parent="BallHandler" instance=ExtResource("3_5o10c")]
light_mask = 5
visibility_layer = 5
position = Vector2(1065, -379)

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(-32, -662)
zoom = Vector2(0.09, 0.09)
position_smoothing_enabled = true
position_smoothing_speed = 2.5
drag_horizontal_enabled = true
drag_vertical_enabled = true
drag_left_margin = 1.0
drag_top_margin = 0.1
drag_right_margin = 1.0
drag_bottom_margin = 0.1
editor_draw_limits = true
editor_draw_drag_margin = true

[node name="Ground" type="Node2D" parent="."]

[node name="StaticBody2D" type="StaticBody2D" parent="Ground"]

[node name="Polygon2D" type="Polygon2D" parent="Ground/StaticBody2D"]
polygon = PackedVector2Array(-782, 1906, -849, 1996, -2549, 1034, -3561, -1667, -4144, -9435, 4211, -9410, 3575, -1721, 2567, 1064, 829, 1999, 765, 1908, 2380, 895, 3434, -1734, 4054, -9291, -3970, -9296, -3391, -1685, -2274, 841)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Ground/StaticBody2D"]
polygon = PackedVector2Array(-849, 1996, -782, 1906, -2276, 841, -3393, -1688, -3972, -9297, 4049, -9288, 3435, -1740, 2382, 891, 767, 1909, 828, 1999, 2570, 1063, 3577, -1727, 4213, -9408, -4148, -9439, -3563, -1666, -2550, 1039)

[node name="Wall 1" parent="Ground" instance=ExtResource("9_vl3sy")]
position = Vector2(1018, -2842)
rotation = 0.349066
scale = Vector2(1, 0.07)

[node name="Wall 2" parent="Ground" instance=ExtResource("9_vl3sy")]
position = Vector2(-1018, -2842)
rotation = -0.349066
scale = Vector2(1, 0.07)

[connection signal="change_ballcount" from="." to="BallHandler/Killbox/Ballcount" method="_on_main_change_ballcount"]
[connection signal="body_entered" from="BallHandler/Killbox" to="." method="_on_killbox_body_entered"]
[connection signal="body_entered" from="BallHandler/Killbox" to="BallHandler/Killbox" method="_on_body_entered"]
[connection signal="change_ballcount" from="BallHandler/Killbox" to="BallHandler/Killbox/Ballcount" method="_on_killbox_change_ballcount"]
